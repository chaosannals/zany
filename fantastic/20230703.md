# 图形界面框架

老式的 Windows API 、WinForm、Delphi 这类型的 UI 性能差的原因。

1. 没有区分数据刷新和渲染事件生命周期（事件周期是游戏开发者引入的，他们对性能要求很高）。老式 UI 开发会因为程序员失误，导致添加 100 个对象就渲染 100 次，或者点击 10 次就渲染 20 次这种。就是因为框架上没有分开数据、事件、渲染。经常在事件里即更新数据又刷新界面。
2. 单向数据流UDF（数据下行，事件上行）的设计，此设计是后来框架对事件生命周期的更简化，只有简单才能放之四海而皆准，更利于解耦。
3. 数据驱动，区分数据和渲染的框架称为数据驱动框架。因为采用上述方式区分开渲染后，渲染由数据最终进入渲染流程前的数据决定渲染，所以认为是数据在驱动渲染。目前新的框架都是数据驱动。
4. 没有专门的表示 UI 界面的语言，例如 HTML XML 或者 Flutter 特别定制的 Dart 或 Jetpack Compose 特别定制的 Kotlin 都是提供了表示 UI 结构的语法。 WinForm 自身的设计文件是类似 XML 的，但是不利于程序员手动修改。（图形界面表示语法是前端引入的，他们更注重可读性）
5. 树形结构，UI 普遍以多叉树的结构组织。拆分数据渲染后可以使得树节点小，传统的树节点是个大类，生成创建消耗会很大。(例如：浏览器 DOM 节点很耗性能，前端框架用 JS 实现的虚拟节点来优化性能，注：DOM 是原生c++实现的，虚拟节点是 JS 实现的，这种大小节点还使得 JS 实现虚拟节点有性能收益)

## 编码规范

而以上数点，老框架是可以通过约束程序员的代码来完成上述部分点的。（比如：数据下行事件上行这些实际上是编程规范。语言支持的话代码量会少，老框架经常程序员乱发事件。新框架你乱发是办不到的，所以一开始接触新框架的老程序员会觉得限制很大，新框架的特点就是给你加限制。）会多出一些代码，使用第三方提供的库，代码量就不会多很多。
